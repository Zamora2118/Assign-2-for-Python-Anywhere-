{% extends "base.html" %}

{% block content %}
  <h1>Book List</h1>

  {% if book_list %}
    <table class="table table-bordered table-striped">
      <thead>
        <tr>
          <th>Image</th>
          <th>Title</th>
          <th>Author</th>
          {% if user.is_superuser %}
            <th>Actions</th>
          {% endif %}
        </tr>
      </thead>
      <tbody>
        {% for book in book_list %}
          <tr>
            <td>
              {% if book.book_image %}
                <img src="{{ book.book_image.url }}" alt="{{ book.title }}" width="80" class="img-thumbnail">
              {% else %}
                <span class="text-muted">No Image</span>
              {% endif %}
            </td>
            <td>
              <a href="{{ book.get_absolute_url }}">{{ book.title }}</a>
            </td>
            <td>{{ book.author }}</td>

            {% if user.is_superuser %}
              <td>
                <a href="{% url 'catalog:book_update' book.pk %}" class="btn btn-sm btn-primary">Edit</a>
                <a href="{% url 'catalog:book_delete' book.pk %}"
                   onclick="return confirm('Are you sure you want to delete this book?')"
                   class="btn btn-sm btn-danger">Delete</a>
              </td>
            {% endif %}
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>There are no books in the library.</p>
  {% endif %}
{% endblock %}
